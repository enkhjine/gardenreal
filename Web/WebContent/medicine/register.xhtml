<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"
	template="../template/template.xhtml">
	<ui:define name="content">
		<section class="content">
		<div class="box">
			<div class="box-body">
				<div class="row flex-container">
					
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:id" class = "label-asterisk">#{i18n['medicine_code']}:</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:inputText
							id="id"
							value="#{infoController.currentMedicine.id}"
							style="min-width: 100%;"
							>													
						</p:inputText>
					</div>
					
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:name" class = "label-asterisk" >#{i18n['medicine_name']}:</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:inputText
							id="name"
							value="#{infoController.currentMedicine.name}"
							style="min-width: 100%;">													
						</p:inputText>
					</div>
				</div>
				
				<div class="row flex-container">
					
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:iName" class = "label-asterisk" >#{i18n['medicine_int_name']}:</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:inputText
							id="iName"
							value="#{infoController.currentMedicine.iName}"
							style="min-width: 100%;">													
						</p:inputText>
					</div>
					
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:atcName">ATC #{i18n['code']}:</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:selectOneMenu id="atcName"
							value="#{infoController.currentMedicine.atcPkId}"
							style="width: 100%;" filter="true">
							<f:selectItems var = "a" value ="#{infoController.atcs}" itemLabel="#{a.nameMn}" itemValue="#{a.pkId}" />													
						</p:selectOneMenu>
					</div>
				</div>
			<div class="row flex-container">
					
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:typeName" >#{i18n['medicine_type']}</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:selectOneMenu id="typeName"
							value="#{infoController.currentMedicine.typePkId}"
							style="width: 100%;">	
							<f:selectItems value = "#{infoController.mTypes}" var = "mt" itemValue="#{mt.pkId}" itemLabel="#{mt.name}"/>												
							
						</p:selectOneMenu>
					</div>
					
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:measurementName">#{i18n['measurement']}</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
					<p:selectOneMenu id="measurementName" 
									value="#{infoController.currentMedicine.measurementPkId}" 
									style="width: 100%;">
									<f:selectItems value = "#{infoController.measurements}" var = "m" itemValue="#{m.pkId}" itemLabel="#{m.name}"/>
					</p:selectOneMenu>
						
					</div>
				</div>
				
				<div class="row flex-container">
					
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:bioActive">#{i18n['affect_fetus']}</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:selectOneRadio id = "bioActive" value = "#{infoController.currentMedicine.bioActive}">
						<f:selectItem itemValue="1" itemLabel="A"/>
						<f:selectItem itemValue="2" itemLabel="B"/>
						<f:selectItem itemValue="3" itemLabel="C"/>
						<f:selectItem itemValue="4" itemLabel="D"/>
						<f:selectItem itemValue="5" itemLabel="X"/>
						
						</p:selectOneRadio>
					</div>
					
					<div class="col-md-1 col-sm-12 col-xs-12 flex-center-self">
						<h:selectBooleanCheckbox id = "ageRange" value = "#{infoController.currentMedicine.activeAllAge}" onclick="disableAgeRenge(this);"/>
					</div>
					<div class="col-md-1 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:ageRange">#{i18n['all_age']}</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:inputText id = "minAge" style="width:50%;display:inline-block;float:left;" value = "#{infoController.currentMedicine.minAge}"/>
						<p:selectOneMenu id="maxAge" style="width:50%;display:inline-block;float:left;" value = "#{infoController.currentMedicine.maxAge}">
							<f:selectItem itemValue="150" itemLabel="#{i18n['above']}"/>
							<f:selectItem itemValue="0" itemLabel="#{i18n['belove']}"/>
						</p:selectOneMenu>
					</div>
				</div>
				
				<div class="row flex-container">
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:warningMessage">Савлагаа</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:inputText value="#{infoController.currentMedicine.drugDose}" style="width:50%;display:inline-block;float:left;" />
					</div>
					
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:description">1 удаагийн тун</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:inputText value="#{infoController.currentMedicine.dose}" style="width:50%;display:inline-block;float:left;" />
					</div>
				</div>
				
				<div class="row flex-container">
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:warningMessage">#{i18n['prohibit']}</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:inputTextarea  id="warningMessage"
							value="#{infoController.currentMedicine.warnigMessage}"
							style="min-width: 100%;">													
						</p:inputTextarea>
					</div>
					
					<div class="col-md-2 col-sm-12 col-xs-12 flex-center-self">
						<label for="form:description">#{i18n['description']}</label>
					</div>
					<div class="col-md-4 col-sm-12 col-xs-12 flex-center-self">
						<p:inputTextarea id="description"
							value="#{infoController.currentMedicine.description}"
							style="min-width: 100%;">													
						</p:inputTextarea>
					</div>
				</div>
				
			<div class="row">
					<div class="col-md-8"></div>
					<div class="col-md-4 text-right">
						<p:commandLink
							action="#{infoController.saveMedicine}" 
							styleClass="btn"
							type="submit" update="form:message"><i class="fa fa-fw fa-check"/>#{i18n['save']}</p:commandLink>
					</div>
				</div>
				
			</div>
		</div>
		</section>
	</ui:define>
	<ui:define name="script">
		<script>
     	//<![CDATA[		
     	          function disableAgeRenge(obj)
     	          {
     	        	  debugger;
     	        	  if(obj.checked != true)
     	        		  {
     	        		 	document.getElementById('form:minAge').disabled = false;
     	        			document.getElementById('form:maxAge').disabled = false;
     	        		  }
     	        	  else
     	        		  {
     	        		 document.getElementById('form:minAge').disabled = true;
  	        			 document.getElementById('form:maxAge').disabled = true;
     	        		  }
     	          }
			$('body').on('keydown', 'input, select, textarea', function(e) {
			    var self = $(this)
			      , form = self.parents('form:eq(0)')
			      , focusable
			      , next
			      ;
			    if (e.keyCode == 13) {
			        focusable = form.find('input,a,select,button,textarea').filter(':visible');
			        next = focusable.eq(focusable.index(this)+1);
			        if (next.length) {
			            next.focus();
			        } else {
			            form.submit();
			        }
			        return false;
			    }
			});
			$(document).ready(function () {
				if(document.getElementById('form:ageRange').checked == true)
					{
					document.getElementById('form:minAge').disabled = true;
	        			 document.getElementById('form:maxAge').disabled = true;
					}
					
				$('input').on('blur', function() {
			        if ($("#form").valid()) {
			            $(".submit").prop('disabled', false);  
			        } else {
			            $(".submit").prop('disabled', 'disabled');
			        }
			    });
			jQuery.validator.setDefaults({
				  debug: true,
				  success: "valid"
				});
		    $('#form').validate({ // initialize the plugin
		    	rules: {
					'form:name' : "required",
					'form:iName': "required" 						
		        },
		    	messages: {
					'form:name' : "#{i18n['enter_medicine_name']}",
					'form:iName': "#{i18n['enter_medicine_int_name']}"
		    	});
			});
     	//]]>
		</script>
	</ui:define>
</ui:composition>